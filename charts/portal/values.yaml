###############################################################
# Copyright (c) 2021,2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

name: "portal"
portContainer: 8080
portService: 8080
replicaCount: 1
securityContext:
  allowPrivilegeEscalation: false
  runAsNonRoot: true
  capabilities:
    drop: ["ALL"]

frontend:
  ingress:
    enabled: false
  portal:
    name: "portal"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-frontend"
      portaltag: 1.0.0-RC4
  registration:
    name: "registration"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-frontend-registration"
      registrationtag: 1.0.0-RC2
  assets:
    name: "assets"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-assets"
      assetstag: 1.0.0-RC2
  env:
    PORTAL_ASSETS_URL: ""
    PORTAL_BACKEND_URL: ""
    CENTRALIDP_URL: ""
    BPDM_API_URL: ""
    SEMANTICS_URL: ""

backend:
  ingress:
    enabled: false
    name: "portal-backend"
  dbConnection:
    sslMode: "Disable"
    port: "5432"
  registration:
    name: "registration-service"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_registration-service"
      registrationservicetag: v1.0.0-RC4
    secret:
      name: "secret-registration"
      appsettings: ""
  administration:
    name: "administration-service"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_administration-service"
      administrationservicetag: v1.0.0-RC4
    secret:
      name: "secret-administration"
      appsettings: ""
  provisioning:
    name: "provisioning-service"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_provisioning-service"
      provisioningservicetag: v1.0.0-RC4
    secret:
      name: "secret-provisioning"
      appsettings: ""
  appmarketplace:
    name: "marketplace-app-service"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_marketplace-app-service"
      appmarketplaceservicetag: v1.0.0-RC4
    secret:
      name: "secret-appmarketplace"
      appsettings: ""
  portalmigrations:
    name: "portal-migrations"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_portal-migrations"
      portalmigrationstag: v1.0.0-RC4
    secret:
      name: "secret-portal-migrations"
      appsettings: ""
    seeding:
      testDataEnvironments: ""
  portalmaintenance:
    name: "portal-maintenance"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_maintenance-service"
      portalmaintenancetag: v1.0.0-RC4
    secret:
      name: "secret-portal-maintenance"
      appsettings: ""
  notification:
    name: "notification-service"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_notification-service"
      notificationservicetag: v1.0.0-RC4
    secret:
      name: "secret-notification"
      appsettings: ""
  services:
    name: "services-service"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_services-service"
      servicesservicetag: v1.0.0-RC4
    secret:
      name: "secret-services"
      appsettings: ""
  provisioningmigrations:
    name: "provisioning-migrations"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_provisioning-migrations"
      provisioningmigrationstag: v1.0.0-RC4
    secret:
      name: "secret-provisioning-migrations"
      appsettings: ""
  checklistworker:
    name: "checklist-worker"
    image:
      name: "ghcr.io/catenax-ng/tx-portal-backend_checklist-worker"
      checklistworkertag: v1.0.0-RC4
    secret: "secret-checklist-worker"
    logging:
      checklistLibrary: "Debug"
      bpdmLibrary: "Debug"
      custodianLibrary: "Debug"
    applicationActivation:
      applicationApprovalInitialRoles:
        portal:
          role: "Company Admin"
    bpdm:
      baseAddress: ""
      tokenAddress: ""
      scope: "openid"
      grantType: "client_credentials"
      clientId: ""
      clientSecret: ""
      username: ""
      password: ""
    clearinghouse:
      baseAddress: ""
      tokenAddress: ""
      scope: "openid"
      grantType: "client_credentials"
      clientId: ""
      clientSecret: ""
      username: ""
      password: ""
    custodian:
      baseAddress: ""
      tokenAddress: ""
      scope: "openid"
      grantType: "client_credentials"
      clientId: ""
      clientSecret: ""
      username: ""
      password: ""
    sdfactory:
      baseAddress: ""
      tokenAddress: ""
      scope: "openid"
      grantType: "client_credentials"
      issuerBpn: ""
      clientId: ""
      clientSecret: ""
      username: ""
      password: ""

postgresql:
  enabled: true
  fullnameOverride: "portal-backend-postgresql"
  auth:
    database: "postgres"
    existingSecret: "secret-postgres-init"
    # custom usernames for cx portal
    portalUser: "portal"
    provisioningUser: "provisioning"
  architecture: "replication"
  audit:
    pgAuditLog: "write, ddl"
    logLinePrefix: "%m %u %d "
  primary:
    initdb:
      scriptsConfigMap: "configmap-postgres-init"
    extraEnvVars:
      - name: "PORTAL_PASSWORD"
        valueFrom:
          secretKeyRef:
            name: "secret-postgres-init"
            key: "portal-password"
      - name: "PROVISIONING_PASSWORD"
        valueFrom:
          secretKeyRef:
            name: "secret-postgres-init"
            key: "provisioning-password"
  secret:
    password: ""
    replicationPassword: ""
    portalPassword: ""
    provisioningPassword: ""

pgadmin4:
  enabled: false
  ingress:
    enabled: false
